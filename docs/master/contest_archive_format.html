<!DOCTYPE html> <html lang="en" dir="auto"> <head><meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5, user-scalable=no"> <meta name="description" content="Contest Archive Format This page describes the archive format for a contest. It describes how to store the information available through the Contes..."> <meta name="revised" content="dd26e17270f4ed536750356ad571459a60bb5496"> <meta name="author" content="ICPC"> <meta name="generator" content="rundocs/jekyll-rtd-theme v2.0.10"><meta name="theme-color" content="#2980b9"> <title>Contest Archive Format 路 CCS Specs</title> <meta name="twitter:title" content="Contest Archive Format 路 CCS Specs"> <meta name="twitter:description" content="Contest Archive Format This page describes the archive format for a contest. It describes how to store the information available through the Contes..."> <meta name="twitter:card" content="summary"> <meta name="twitter:site" content="@ICPC"> <meta name="twitter:url" content="/master/contest_archive_format"> <meta name="twitter:creator" content="@rundocs/jekyll-rtd-theme v2.0.10"> <meta property="og:title" content="Contest Archive Format 路 CCS Specs"> <meta property="og:description" content="Contest Archive Format This page describes the archive format for a contest. It describes how to store the information available through the Contes..."> <meta property="og:locale" content="en"> <meta property="og:url" content="/master/contest_archive_format"> <meta property="og:type" content="article"> <meta property="article:author" content="ICPC"> <meta property="article:published_time" content="2020-10-12T18:33:12+02:00"> <meta property="article:modified_time" content="2022-03-20T12:09:57+01:00"> <script type="application/ld+json"> { "@context": "https://schema.org", "@type": "Article", "mainEntityOfPage": { "@type": "WebPage", "@id": "/master/contest_archive_format" }, "headline": "Contest Archive Format 路 CCS Specs", "image": [], "author": { "@type": "Person", "name": "ICPC" }, "datePublished": "2020-10-12T18:33:12+02:00", "dateModified": "2022-03-20T12:09:57+01:00", "publisher": { "@type": "Organization", "name": "ICPC", "logo": { "@type": "ImageObject", "url": "https://avatars.githubusercontent.com/u/5224374?v=4" } }, "description": "Contest Archive Format This page describes the archive format for a contest. It describes how to store the information available through the Contes..." } </script> <link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="prev" href="/master/contest_api"><link rel="canonical" href="/master/contest_archive_format"><link rel="icon" type="image/svg+xml" href="/master/assets/images/favicon.svg"><link rel="icon" type="image/png" href="/master/assets/images/favicon-16x16.png" sizes="16x16"> <link rel="icon" type="image/png" href="/master/assets/images/favicon-32x32.png" sizes="32x32"> <link rel="icon" type="image/png" href="/master/assets/images/favicon-96x96.png" sizes="96x96"><link rel="mask-icon" href="/master/assets/images/favicon.svg" color="#2980b9"><link rel="apple-touch-icon" href="/master/assets/images/apple-touch-icon-300x300.jpg"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@2.0.10/assets/css/theme.min.css"><script> window.ui = { title: "CCS Specs", baseurl: "/master", i18n: { search_results: "Search Results", search_results_found: "Search finished, found # page(s) matching the search query.", search_results_not_found: "Your search did not match any documents, please make sure that all characters are spelled correctly!" } }; </script> </head> <body class="container"><div class="sidebar-wrap overflow-hidden"> <div class="sidebar height-full overflow-y-scroll overflow-x-hidden"> <div class="header d-flex flex-column p-3 text-center"> <div class="title pb-1"> <a class="h4 no-underline py-1 px-2 rounded-1" href="/master/" title="CCS Specs"> <i class="fa fa-home"></i> CCS Specs </a> </div> <span class="version"></span> <form class="search pt-2" action="/master/search.html" method="get" autocomplete="off"> <input class="form-control input-block input-sm" type="text" name="q" placeholder="Search docs..."> </form> </div> <div class="toctree py-2" data-spy="affix" role="navigation" aria-label="main navigation"> <ul> <li class="toc level-1 " data-sort="1" data-level="1"> <a class="d-flex flex-items-baseline " href="/master/ccs_system_requirements">1. CCS System Requirements</a> </li> <li class="toc level-1 " data-sort="2" data-level="1"> <a class="d-flex flex-items-baseline " href="/master/contest_api">2. Contest API</a> </li> <li class="toc level-1 current" data-sort="3" data-level="1"> <a class="d-flex flex-items-baseline current" href="/master/contest_archive_format">3. Contest Archive Format</a> </li> </ul> </div> </div> </div> <div class="content-wrap"> <div class="header d-flex flex-justify-between p-2 hide-lg hide-xl" aria-label="top navigation"> <button id="toggle" aria-label="Toggle menu" class="btn-octicon p-2 m-0 text-white" type="button"> <i class="fa fa-bars"></i> </button> <div class="title flex-1 d-flex flex-justify-center"> <a class="h4 no-underline py-1 px-2 rounded-1" href="/master/">CCS Specs</a> </div> </div> <div class="content p-3 p-sm-5"> <div class="navigation-top d-flex flex-justify-between"> <ul class="breadcrumb" role="navigation" aria-label="breadcrumbs navigation"> <li class="breadcrumb-item"> <a class="no-underline" href="/master/" title="/docs"> <i class="fa fa-home"></i> </a> </li><li class="breadcrumb-item" aria-current="page">Contest_Archive_Format.md</li></ul> <a class="edit" href="https://github.com/icpc/ccs-specs/edit/gh-pages/docs/Contest_Archive_Format.md" title="Edit on GitHub" rel="noreferrer" target="_blank"> <i class="fa fa-edit"></i> </a> </div> <hr> <div role="main" itemscope="itemscope" itemtype="https://schema.org/Article"> <div class="markdown-body" itemprop="articleBody"> <h1 id="contest-archive-format">Contest Archive Format</h1> <p>This page describes the archive format for a contest. It describes how to store the information available through the <a href="contest_api">Contest API</a> on disk.</p> <p>There are several reasons that contest information will be stored on disk, including:</p> <ul> <li>As configuration used to initialize a CCS</li> <li>As an archive of what happened in a contest</li> <li>As an archive for replaying a contest, either for testing contest tools or for teams to compete against live data</li> <li>As a base for offline analysis</li> </ul> <h2 id="archive-contents">Archive contents</h2> <p>The package consists of a single directory containing files as described below, or alternatively, a ZIP compressed archive of the directory. It is strongly recommended that the name of the directory or the base name of the archive match the contest ID, if a contest ID is specified.</p> <p>A package contains information regarding a single contest (corresponding to the <code>/contests/&lt;id&gt;/*</code> endpoints of the API). The API can contain information for several contests, to store the information for multiple contests a package per contest would be needed.</p> <p>Information in the API is always either in JSON format, <a href="contest_api#event-feed">NDJSON</a> format, or linked using a <a href="contest_api#json-attribute-types">file reference</a> JSON object.</p> <ul> <li>The JSON returned from the endpoint <code>/</code> is stored as <code>api.json</code>.</li> <li>The JSON returned from the endpoint <code>/contests/&lt;id&gt;</code> is stored as <code>contest.json</code>. (Notice the singular form).</li> <li>The JSON returned from the endpoint <code>/contests/&lt;id&gt;/&lt;endpoint&gt;</code> is stored as <code>&lt;endpoint&gt;.json</code>.</li> <li>The NDJSON returned from the endpoint <code>/contests/&lt;id&gt;/&lt;endpoint&gt;</code> is stored as <code>&lt;endpoint&gt;.ndjson</code>. (The only such endpoint is <code>event-feed</code>.)</li> </ul> <p>Files referenced in <code>contest.json</code> are stored as <code>contest/&lt;filename&gt;</code>, and files referenced in <code>&lt;endpoint&gt;.json</code> are stored as <code>&lt;endpoint&gt;/&lt;id&gt;/&lt;filename&gt;</code>, where:</p> <ul> <li><code>&lt;id&gt;</code> is the ID of the endpoint object the reference is in.</li> <li><code>&lt;filename&gt;</code> is the filename specified in the file reference object.</li> </ul> <p>Note that the API specification requires that filenames are unique within endpoint objects, so this is always possible.</p> <p>It is not required that a URL specified in an href is always valid. Specifically, in many cases the contest is running in a local network that is taken down after the contest, and in this case the URL would definitely not still be working. To keep the archiving process as simple as possible, stale URLs do not have to be removed from the data, but due to this the URLs should be ignored and the file stored as specified above should be used instead.</p> <p>Optionally one could create a Shallow Archive by not storing the files, in which case the URLs must be valid. This could be useful in some cases where the size of the archive matters.</p> <p>In some cases it could make sense to merge multiple API sources (of the same contest) in a single archive. One example of this would be a contest that was running with a primary and <a href="ccs_system_requirements#shadow-mode">shadow</a> CCS. Typically in such cases, most of the data is identical (or at least the differences are irrelevant), so only the data that differs (in relevant ways) needs to be stored. If there is an additional source for <code>&lt;endpoint&gt;</code> it is stored as above, but wherever <code>&lt;endpoint&gt;</code> is used in the path, instead use <code>&lt;endpoint&gt;_&lt;system&gt;</code> where <code>&lt;system&gt;</code> is a unique name for the additional source.</p> <h2 id="example-uses">Example uses</h2> <p>The rest of the document describes use cases for the Archive Format, listing which data would be required for that use case.</p> <h3 id="ccs-configuration">CCS configuration</h3> <p>Used for configuring a CCS (primary or shadow) before a contest. Suitable for download from a registration system or similar tool.</p> <p>Required endpoints:</p> <ul> <li>api</li> <li>contests</li> <li>languages</li> <li>problems</li> <li>teams</li> <li>accounts</li> </ul> <p>Optional endpoints:</p> <ul> <li>judgement-types</li> <li>groups</li> <li>organizations</li> <li>people</li> </ul> <h4 id="example-file-listing">Example file listing</h4><pre><code>api.json
contest.json
contest/banner.png
contest/logo.png
judgement-types.json
languages.json
problems.json
problems/problemA/problemA.zip
problems/problemA/problemA.pdf
problems/problemB/problemB.zip
problems/problemB/problemB.pdf
...
groups.json
organizations.json
organizations/kth.se/logo56x56.png
organizations/kth.se/logo160x160.png
organizations/baylor.edu/logo56x56.png
organizations/baylor.edu/logo160x160.png
...
teams.json
teams/team-001/photo.jpg
teams/team-002/photo.jpg
teams/team-003/photo.jpg
...
people.json
people/john-smith/photo.jpg
people/jane-doe/photo.jpg
...
accounts.json
</code></pre>  <h3 id="registration-upload">Registration upload</h3> <p>Used for uploading local registration data to a central registration system (such as the ICPC CMS).</p> <p>Required endpoints:</p> <ul> <li>api</li> <li>organizations</li> <li>teams</li> <li>people</li> </ul> <h4 id="example-file-listing-1">Example file listing</h4><pre><code>api.json
organizations.json
organizations/kth.se/logo56x56.png
organizations/kth.se/logo160x160.png
organizations/baylor.edu/logo56x56.png
organizations/baylor.edu/logo160x160.png
...
teams.json
teams/team-001/photo.jpg
teams/team-002/photo.jpg
teams/team-003/photo.jpg
...
people.json
people/john-smith/photo.jpg
people/jane-doe/photo.jpg
...
</code></pre>  <h3 id="results-upload">Results upload</h3> <p>Used for uploading results from a finished contest to a central repository (such as the ICPC CMS).</p> <p>Required endpoints:</p> <ul> <li>api</li> <li>teams</li> <li>scoreboard</li> </ul> <p>Optional endpoints:</p> <ul> <li>awards</li> </ul> <h4 id="example-file-listing-2">Example file listing</h4><pre><code>api.json
teams.json
scoreboard.json
awards.json
</code></pre>  <script async> function versionChange(selectList) { /* TODO: Redirect to same page on the other version instead of the overview. */ window.location.href = window.location.origin + '/' + selectList.value + '/' } var xmlhttp = new XMLHttpRequest(); xmlhttp.onreadystatechange = function() { if (this.readyState == 4 && this.status == 200) { var availableVersions = JSON.parse(this.responseText); var version = document.getElementsByClassName(['version'])[0]; currentVersion = 'master'; version.innerHTML = ''; var selectList = document.createElement("select"); selectList.id = "versionSelect"; version.appendChild(selectList); for (var i = 0; i < availableVersions.length; i++) { var option = document.createElement("option"); option.value = availableVersions[i]; option.text = availableVersions[i]; selectList.appendChild(option); } selectList.onchange = function(){versionChange(selectList);}; selectList.value = currentVersion; } }; xmlhttp.open("GET", '/versions.json', true); xmlhttp.send(); </script> </div> </div> <div class="navigation-bottom d-flex flex-justify-between py-3" role="navigation" aria-label="footer navigation"> <div class="prev"><a href="/master/contest_api" class="btn" title="Contest API" accesskey="p" rel="prev"> <i class="fa fa-arrow-circle-left"></i> Previous </a></div> <div class="next"></div> </div><hr> <div class="copyright text-center text-gray" role="contentinfo"> <i class="fa fa-copyright"></i> <span class="time">2020-2021,</span> <a class="text-gray" href="https://github.com/icpc" rel="noreferrer" target="_blank">ICPC</a> Revision <a class="text-gray" href="https://github.com/icpc/ccs-specs/commit/dd26e17270f4ed536750356ad571459a60bb5496" title="dd26e17270f4ed536750356ad571459a60bb5496" rel="noreferrer" target="_blank">dd26e17</a> <br> <div class="generator"> Built with <a href="https://pages.github.com" rel="noreferrer" target="_blank" title="github-pages v214">GitHub Pages</a> using a <a href="https://github.com/rundocs/jekyll-rtd-theme" rel="noreferrer" target="_blank" title="rundocs/jekyll-rtd-theme v2.0.10">theme</a> provided by <a href="https://rundocs.io" rel="noreferrer" target="_blank">RunDocs</a>. </div> </div> </div> </div> <div class="addons-wrap d-flex flex-column overflow-y-auto"> <div class="status d-flex flex-justify-between p-2"> <div class="title p-1"> <i class="fa fa-book"></i> CCS Specs </div> <div class="branch p-1"> <span class="name"> gh-pages </span> <i class="fa fa-caret-down"></i> </div> </div> <div class="addons d-flex flex-column height-full p-2 d-none"> <dl> <dt>GitHub</dt> <dd> <a href="https://github.com/icpc/ccs-specs" title="Stars: 3"> <i class="fa fa-github"></i> Homepage </a> </dd> <dd> <a href="https://github.com/icpc/ccs-specs/issues" title="Open issues: 3"> <i class="fa fa-question-circle-o"></i> Issues </a> </dd> <dd> <a href="https://github.com/icpc/ccs-specs/zipball/gh-pages" title="Size: 30607 Kb"> <i class="fa fa-download"></i> Download </a> </dd> </dl> <hr> <div class="license f6 pb-2"> This <a href="/master/" title="CCS Specs">Software</a> is under the terms of <a href="https://github.com/icpc/ccs-specs">The Unlicense</a>. </div> </div> </div> <script src="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@2.0.10/assets/js/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/gh/rundocs/jekyll-rtd-theme@2.0.10/assets/js/theme.min.js"></script> </body> </html>