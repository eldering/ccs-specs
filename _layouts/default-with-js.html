---
layout: default
---

{{ content }}

<script>
function versionChange(selectList) {
    /* TODO: Redirect to same page on the other version instead of the overview. */
    window.location.href = window.location.origin + '/' + selectList.value + '/'
}
var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
         var availableVersions = JSON.parse(this.responseText);
         var version = document.getElementsByClassName(['version'])[0];
         currentVersion = '{{ site.version | default: "" }}';
         version.innerHTML = '';
         var selectList = document.createElement("select");
         selectList.id = "versionSelect";
         version.appendChild(selectList);
         for (var i = 0; i < availableVersions.length; i++) {
             var option = document.createElement("option");
             option.value = availableVersions[i];
             option.text = availableVersions[i];
             selectList.appendChild(option);
         }
         selectList.onchange = function(){versionChange(selectList);};
         selectList.value = currentVersion;
    }
};
xmlhttp.open("GET", '/versions.json', true);
xmlhttp.send();

var links = document.querySelectorAll('[data-ccs-specs-version-item] a');
{%- assign version = site.version | default: "" -%}
{% if version == "" %}
links[0].innerHTML = 'Contest Control System (CCS) Specifications';
links[1].parentNode.remove();
{% else %}
var version = "{{ version }}";
version = version.charAt(0).toUpperCase() + version.slice(1);
var spec = version + " Specification";
for (var i = 0; i < links.length; i++) {
    links[i].innerHTML = spec;
}
{% endif %}
</script>
